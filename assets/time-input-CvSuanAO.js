import{j as w}from"./jsx-runtime-CS_Wz6c_.js";import{a as le}from"./context-DL1kNI1P.js";import{$ as g}from"./mergeProps-VNdaC4-V.js";import{$ as se,d as F,c as ie,D as de,b as ue}from"./date-input-field-Iv3zN5h-.js";import{m as ce,p as fe,q as G,r as pe,s as me,$ as be,a as $e}from"./useDateFormatter-C-Agq8ec.js";import{r as c}from"./index-Dy2Ak0OH.js";import{$ as Pe}from"./useControlledState-B6nO32B9.js";import{u as ve}from"./provider-context-DmA892L5.js";import{u as xe,a as he}from"./base-form-BElK45Vm.js";import{m as Ve,f as ge}from"./utils-Dl_53iLP.js";import{u as A}from"./dom-DrLNPp_C.js";import{c as P}from"./clsx-IIdnr2mY.js";import{o as Me}from"./functions-CkCEVJeD.js";import{d as v}from"./assertion-BI5aukJI.js";function Ie(t){let{placeholderValue:n=new ce,minValue:b,maxValue:i,granularity:$,validate:d}=t;var f;let[r,x]=Pe(t.value,(f=t.defaultValue)!==null&&f!==void 0?f:null,t.onChange),o=r||n,u=o&&"day"in o?o:void 0,p=t.defaultValue&&"timeZone"in t.defaultValue?t.defaultValue.timeZone:void 0,m=c.useMemo(()=>{let l=o&&"timeZone"in o?o.timeZone:void 0;return(l||p)&&n?fe(V(n),l||p):V(n)},[n,o,p]),a=c.useMemo(()=>V(b,u),[b,u]),M=c.useMemo(()=>V(i,u),[i,u]),I=c.useMemo(()=>r&&"day"in r?G(r):r,[r]),y=c.useMemo(()=>r==null?null:V(r),[r]);return{...se({...t,value:y,defaultValue:void 0,minValue:a,maxValue:M,onChange:l=>{x(u||p?l:l&&G(l))},granularity:$||"minute",maxGranularity:"hour",placeholderValue:m??void 0,createCalendar:()=>new pe,validate:c.useCallback(()=>d==null?void 0:d(r),[d,r])}),timeValue:I}}function V(t,n=be($e())){return t?"day"in t?t:me(n,t):null}function ye(t){const n=ve(),{validationBehavior:b}=xe(he)||{},[i,$]=Ve(t,F.variantKeys),{ref:d,as:f,label:r,inputRef:x,description:o,startContent:u,endContent:p,className:m,classNames:a,groupProps:M={},labelProps:I,fieldProps:y,errorMessageProps:C,descriptionProps:W,validationBehavior:l=b??(n==null?void 0:n.validationBehavior)??"native",shouldForceLeadingZeros:E=!0,minValue:k,maxValue:q,isInvalid:L,errorMessage:O}=i,D=A(d),R=A(x),{locale:S}=le(),B=t.disableAnimation??(n==null?void 0:n.disableAnimation),T=Ie({...t,label:r,locale:S,minValue:k,maxValue:q,validationBehavior:l,isInvalid:L,shouldForceLeadingZeros:E}),{labelProps:_,fieldProps:Z,inputProps:H,validationErrors:K,validationDetails:z,descriptionProps:J,errorMessageProps:N,isInvalid:j}=ie({...t,label:r,validationBehavior:l,inputRef:R},T,D),Q=P(a==null?void 0:a.base,m),h=c.useMemo(()=>(!t.labelPlacement||t.labelPlacement==="inside")&&!i.label?"outside":t.labelPlacement??"inside",[t.labelPlacement,i.label]),U=h==="outside"||h==="outside-left",s=c.useMemo(()=>F({...$,disableAnimation:B,labelPlacement:h,className:m}),[Me($),h,B,m]),X=e=>({...g(_,I,e),"data-slot":"label",className:s.label({class:P(a==null?void 0:a.label,e==null?void 0:e.className)})}),Y=e=>({...e,...H,ref:R}),ee=(e={})=>({ref:D,"data-slot":"input",...g(Z,y,e),className:s.input({class:P(a==null?void 0:a.input,e==null?void 0:e.className)})}),ae=(e={})=>({...e,...M,"data-slot":"input-wrapper",className:s.inputWrapper({class:a==null?void 0:a.inputWrapper}),onClick:Z.onClick}),te=e=>({...e,"data-slot":"inner-wrapper",className:s.innerWrapper({class:a==null?void 0:a.innerWrapper})}),re=e=>({...e,"data-slot":"helper-wrapper",className:s.helperWrapper({class:P(a==null?void 0:a.helperWrapper,e==null?void 0:e.className)})}),ne=(e={})=>({...g(N,C,e),"data-slot":"error-message",className:s.errorMessage({class:P(a==null?void 0:a.errorMessage,e==null?void 0:e.className)})}),oe=(e={})=>({...g(J,W,e),"data-slot":"description",className:s.description({class:P(a==null?void 0:a.description,e==null?void 0:e.className)})});return{state:T,domRef:D,slots:s,classNames:a,labelPlacement:h,getBaseGroupProps:()=>({as:f,label:r,description:o,endContent:p,errorMessage:O,isInvalid:j,startContent:u,validationDetails:z,validationErrors:K,shouldLabelBeOutside:U,"data-slot":"base","data-required":v(t.isRequired),"data-disabled":v(t.isDisabled),"data-readonly":v(t.isReadOnly),"data-invalid":v(j),"data-has-start-content":v(!!u),"data-has-end-content":v(!!p),descriptionProps:oe(),errorMessageProps:ne(),groupProps:ae(),helperWrapperProps:re(),labelProps:X(),wrapperProps:te(),className:s.base({class:Q})}),getFieldProps:ee,getInputProps:Y}}const Le=ge(function(n,b){const{state:i,slots:$,classNames:d,getBaseGroupProps:f,getInputProps:r,getFieldProps:x}=ye({...n,ref:b});return w.jsx(de,{...f(),children:w.jsx(ue,{classNames:d,inputProps:r(),slots:$,state:i,...x()})})});export{Le as T};
