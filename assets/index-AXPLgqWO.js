import{r}from"./index-Dy2Ak0OH.js";import{d as x}from"./functions-CkCEVJeD.js";function E(b={}){const{hasMore:t=!0,distance:o=250,isEnabled:l=!0,shouldUseLoader:i=!0,onLoadMore:n}=b,a=r.useRef(null),f=r.useRef(null),s=r.useRef(null),c=r.useRef(!1),u=r.useCallback(()=>{let e;return!c.current&&t&&n&&(c.current=!0,n(),e=setTimeout(()=>{c.current=!1},100)),()=>clearTimeout(e)},[t,n]);return r.useLayoutEffect(()=>{const e=a.current;if(!l||!e||!t)return;if(i){const p=f.current;if(!p)return;const R={root:e,rootMargin:`0px 0px ${o}px 0px`,threshold:.1},m=new IntersectionObserver(h=>{const[v]=h;v.isIntersecting&&u()},R);return m.observe(p),s.current=m,()=>{s.current&&s.current.disconnect()}}const d=x(()=>{e.scrollHeight-e.scrollTop<=e.clientHeight+o&&u()},100);return e.addEventListener("scroll",d),()=>{e.removeEventListener("scroll",d)}},[t,o,l,i,u]),[f,a]}export{E as u};
