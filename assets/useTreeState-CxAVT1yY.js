import{$ as o,a as u,b as f}from"./SelectionManager-CXnfrpCS.js";import{r}from"./index-Dy2Ak0OH.js";import{$ as K}from"./useControlledState-B6nO32B9.js";class c{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let e=this.keyMap.get(t);var n;return e&&(n=e.prevKey)!==null&&n!==void 0?n:null}getKeyAfter(t){let e=this.keyMap.get(t);var n;return e&&(n=e.nextKey)!==null&&n!==void 0?n:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){var e;return(e=this.keyMap.get(t))!==null&&e!==void 0?e:null}at(t){const e=[...this.getKeys()];return this.getItem(e[t])}constructor(t,{expandedKeys:e}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=t,e=e||new Set;let n=s=>{if(this.keyMap.set(s.key,s),s.childNodes&&(s.type==="section"||e.has(s.key)))for(let d of s.childNodes)n(d)};for(let s of t)n(s);let l=null,y=0;for(let[s,d]of this.keyMap)l?(l.nextKey=s,d.prevKey=l.key):(this.firstKey=s,d.prevKey=void 0),d.type==="item"&&(d.index=y++),l=d,l.nextKey=void 0;var i;this.lastKey=(i=l==null?void 0:l.key)!==null&&i!==void 0?i:null}}function b(a){let{onExpandedChange:t}=a,[e,n]=K(a.expandedKeys?new Set(a.expandedKeys):void 0,a.defaultExpandedKeys?new Set(a.defaultExpandedKeys):new Set,t),l=o(a),y=r.useMemo(()=>a.disabledKeys?new Set(a.disabledKeys):new Set,[a.disabledKeys]),i=u(a,r.useCallback(d=>new c(d,{expandedKeys:e}),[e]),null);return r.useEffect(()=>{l.focusedKey!=null&&!i.getItem(l.focusedKey)&&l.setFocusedKey(null)},[i,l.focusedKey]),{collection:i,expandedKeys:e,disabledKeys:y,toggleKey:d=>{n(h(e,d))},setExpandedKeys:n,selectionManager:new f(i,l)}}function h(a,t){let e=new Set(a);return e.has(t)?e.delete(t):e.add(t),e}export{b as $};
