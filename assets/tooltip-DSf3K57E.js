const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DyQvxc8N.js","./features-animation-C9bPcVbr.js","./index-CbqanOKQ.js","./jsx-runtime-CS_Wz6c_.js","./index-Dy2Ak0OH.js","./_commonjsHelpers-Cpj98o6Y.js","./filter-props-Dg3FrsQW.js","./GlobalConfig-BfVCAYU5.js","./WillChangeMotionValue-B6OkRreS.js"])))=>i.map(i=>d[i]);
import{_ as ue}from"./iframe-BOY4_CVu.js";import{j as i}from"./jsx-runtime-CS_Wz6c_.js";import{a as W}from"./useModal-DGSPTD8W.js";import{r as s}from"./index-Dy2Ak0OH.js";import{$ as E,d as fe}from"./mergeProps-VNdaC4-V.js";import{$ as pe,a as me}from"./useOverlayTriggerState-BqHBeDRf.js";import{$ as be}from"./filterDOMProps-CeZl_uWj.js";import{$ as J}from"./useHover-bWO3Z0KF.js";import{a as $e,e as he}from"./useFocusWithin-Dv5DP61h.js";import{$ as Te}from"./useFocusable-aXrZ_JBU.js";import{p as Y,a as ve,t as xe,b as q,g as ye}from"./utils-BPavffEa.js";import{u as Oe}from"./index-BZiajwfa.js";import{u as we}from"./provider-context-DmA892L5.js";import{m as De,f as Ee}from"./utils-Dl_53iLP.js";import{c as Re}from"./dom-DrLNPp_C.js";import{m as Ae}from"./refs-DLrq_aXV.js";import{o as Ce}from"./functions-CkCEVJeD.js";import{d as A}from"./assertion-BI5aukJI.js";import{c as je}from"./clsx-IIdnr2mY.js";import{L as Ie,m as Pe,A as _e}from"./index-CbqanOKQ.js";import{T as Le}from"./transition-utils-BEWNTMUv.js";import{w as He}from"./console-B9aq-5md.js";const Se=1500,G=500;let w={},ge=0,I=!1,y=null,D=null;function ke(e={}){let{delay:o=Se,closeDelay:n=G}=e,{isOpen:l,open:x,close:d}=pe(e),r=s.useMemo(()=>`${++ge}`,[]),t=s.useRef(null),m=s.useRef(d),b=()=>{w[r]=$},u=()=>{for(let c in w)c!==r&&(w[c](!0),delete w[c])},a=()=>{t.current&&clearTimeout(t.current),t.current=null,u(),b(),I=!0,x(),y&&(clearTimeout(y),y=null),D&&(clearTimeout(D),D=null)},$=c=>{c||n<=0?(t.current&&clearTimeout(t.current),t.current=null,m.current()):t.current||(t.current=setTimeout(()=>{t.current=null,m.current()},n)),y&&(clearTimeout(y),y=null),I&&(D&&clearTimeout(D),D=setTimeout(()=>{delete w[r],D=null,I=!1},Math.max(G,n)))},h=()=>{u(),b(),!l&&!y&&!I?y=setTimeout(()=>{y=null,I=!0,a()},o):l||a()};return s.useEffect(()=>{m.current=d},[d]),s.useEffect(()=>()=>{t.current&&clearTimeout(t.current),w[r]&&delete w[r]},[r]),{isOpen:l,open:c=>{!c&&o>0&&!t.current?h():a()},close:$}}function Ne(e,o){let n=be(e,{labelable:!0}),{hoverProps:l}=J({onHoverStart:()=>o==null?void 0:o.open(!0),onHoverEnd:()=>o==null?void 0:o.close()});return{tooltipProps:E(n,l,{role:"tooltip"})}}function Ve(e,o,n){let{isDisabled:l,trigger:x}=e,d=fe(),r=s.useRef(!1),t=s.useRef(!1),m=()=>{(r.current||t.current)&&o.open(t.current)},b=T=>{!r.current&&!t.current&&o.close(T)};s.useEffect(()=>{let T=p=>{n&&n.current&&p.key==="Escape"&&(p.stopPropagation(),o.close(!0))};if(o.isOpen)return document.addEventListener("keydown",T,!0),()=>{document.removeEventListener("keydown",T,!0)}},[n,o]);let u=()=>{x!=="focus"&&($e()==="pointer"?r.current=!0:r.current=!1,m())},a=()=>{x!=="focus"&&(t.current=!1,r.current=!1,b())},$=()=>{t.current=!1,r.current=!1,b(!0)},h=()=>{he()&&(t.current=!0,m())},c=()=>{t.current=!1,r.current=!1,b(!0)},{hoverProps:f}=J({isDisabled:l,onHoverStart:u,onHoverEnd:a}),{focusableProps:R}=Te({isDisabled:l,onFocus:h,onBlur:c},n);return{triggerProps:{"aria-describedby":o.isOpen?d:void 0,...E(R,f,{onPointerDown:$,onKeyDown:$})},tooltipProps:{id:d}}}function Fe(e){const o=we(),[n,l]=De(e,Y.variantKeys),{ref:x,as:d,isOpen:r,content:t,children:m,defaultOpen:b,onOpenChange:u,isDisabled:a,trigger:$,shouldFlip:h=!0,containerPadding:c=12,placement:f="top",delay:R=0,closeDelay:T=500,showArrow:p=!1,offset:P=7,crossOffset:C=0,isDismissable:Q,shouldCloseOnBlur:X=!0,portalContainer:Z,isKeyboardDismissDisabled:ee=!1,updatePositionDeps:M=[],shouldCloseOnInteractOutside:te,className:oe,onClose:N,motionProps:re,classNames:O,...V}=n,se=d||"div",F=(e==null?void 0:e.disableAnimation)??(o==null?void 0:o.disableAnimation)??!1,j=ke({delay:R,closeDelay:T,isDisabled:a,defaultOpen:b,isOpen:r,onOpenChange:k=>{u==null||u(k),k||N==null||N()}}),_=s.useRef(null),L=s.useRef(null),H=s.useId(),v=j.isOpen&&!a;s.useImperativeHandle(x,()=>Re(L));const{triggerProps:z,tooltipProps:ne}=Ve({isDisabled:a,trigger:$},j,_),{tooltipProps:K}=Ne({isOpen:v,...E(n,ne)},j),{overlayProps:B,placement:S,updatePosition:le}=ve({isOpen:v,targetRef:_,placement:xe(f),overlayRef:L,offset:p?P+3:P,crossOffset:C,shouldFlip:h,containerPadding:c});Oe(()=>{M.length&&le()},M);const{overlayProps:U}=me({isOpen:v,onClose:j.close,isDismissable:Q,shouldCloseOnBlur:X,isKeyboardDismissDisabled:ee,shouldCloseOnInteractOutside:te},L),g=s.useMemo(()=>Y({...l,disableAnimation:F,radius:(e==null?void 0:e.radius)??"md",size:(e==null?void 0:e.size)??"md",shadow:(e==null?void 0:e.shadow)??"sm"}),[Ce(l),F,e==null?void 0:e.radius,e==null?void 0:e.size,e==null?void 0:e.shadow]),ae=s.useCallback((k={},de=null)=>({...E(z,k),ref:Ae(de,_),"aria-describedby":v?H:void 0}),[z,v,H,j]),ce=s.useCallback(()=>({ref:L,"data-slot":"base","data-open":A(v),"data-arrow":A(p),"data-disabled":A(a),"data-placement":q(S||"top",f),...E(K,U,V),style:E(B.style,V.style,n.style),className:g.base({class:O==null?void 0:O.base}),id:H}),[g,v,p,a,S,f,K,U,V,B,n,H]),ie=s.useCallback(()=>({"data-slot":"content","data-open":A(v),"data-arrow":A(p),"data-disabled":A(a),"data-placement":q(S||"top",f),className:g.content({class:je(O==null?void 0:O.content,oe)})}),[g,v,p,a,S,f,O]);return{Component:se,content:t,children:m,isOpen:v,triggerRef:_,showArrow:p,portalContainer:Z,placement:f,disableAnimation:F,isDisabled:a,motionProps:re,getTooltipContentProps:ie,getTriggerProps:ae,getTooltipProps:ce}}const Me=()=>ue(()=>import("./index-DyQvxc8N.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url).then(e=>e.default),ze=Ee((e,o)=>{const{Component:n,children:l,content:x,isOpen:d,portalContainer:r,placement:t,disableAnimation:m,motionProps:b,getTriggerProps:u,getTooltipProps:a,getTooltipContentProps:$}=Fe({...e,ref:o});let h;try{if(s.Children.count(l)!==1)throw new Error;if(!s.isValidElement(l))h=i.jsx("p",{...u(),children:l});else{const C=l;h=s.cloneElement(C,u(C.props,C.ref))}}catch{h=i.jsx("span",{}),He("Tooltip must have only one child node. Please, check your code.")}const{ref:c,id:f,style:R,...T}=a(),p=i.jsx("div",{ref:c,id:f,style:R,children:i.jsx(Ie,{features:Me,children:i.jsx(Pe.div,{animate:"enter",exit:"exit",initial:"exit",variants:Le.scaleSpring,...E(b,T),style:{...ye(t)},children:i.jsx(n,{...$(),children:x})})})});return i.jsxs(i.Fragment,{children:[h,m&&d?i.jsx(W,{portalContainer:r,children:i.jsx("div",{ref:c,id:f,style:R,...T,children:i.jsx(n,{...$(),children:x})})}):i.jsx(_e,{children:d?i.jsx(W,{portalContainer:r,children:p}):null})]})});ze.displayName="NextUI.Tooltip";export{ze as T};
