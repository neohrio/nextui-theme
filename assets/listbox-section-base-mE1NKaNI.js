import{j as m}from"./jsx-runtime-CS_Wz6c_.js";import{d as X,$ as E,b as G,e as ve}from"./mergeProps-VNdaC4-V.js";import{$ as ee}from"./filterDOMProps-CeZl_uWj.js";import{c as xe,e as Y}from"./useFocusWithin-Dv5DP61h.js";import{$ as ye}from"./useLabel-CCOMniNI.js";import{a as Se,b as Me,c as $e,m as Z,u as Ce,d as Pe}from"./index-CunruRV8.js";import{$ as we}from"./useListState-Dc8Tj1Wi.js";import{r as O}from"./index-Dy2Ak0OH.js";import{u as te}from"./provider-context-DmA892L5.js";import{u as Ie}from"./dom-DrLNPp_C.js";import{f as se}from"./filter-dom-props-BPLFryJX.js";import{c as B}from"./clsx-IIdnr2mY.js";import{D as ze}from"./divider-DiQ-8az1.js";import{a as ke}from"./useFocusRing-BgM-8Y4a.js";import{c as Oe}from"./openLink-BoTcy9x3.js";import{a as Ee,b as je}from"./platform-BknMeRIZ.js";import{$ as oe}from"./useHover-bWO3Z0KF.js";import{b as Te}from"./useSelectableItem-Abho0jbh.js";import{b as De}from"./usePress-BDQnv3aP.js";import{m as Ae,f as ie}from"./utils-Dl_53iLP.js";import{o as Fe,r as _e}from"./functions-CkCEVJeD.js";import{w as Le}from"./console-B9aq-5md.js";import{d as D,b as Re}from"./assertion-BI5aukJI.js";import{r as Be}from"./index-C2kXbMnG.js";import{$ as Ve}from"./Item-CkpyyYVy.js";import{$ as He}from"./Section-CJejNSst.js";const Lt=[{label:"Cat",value:"cat",description:"The second most popular pet in the world"},{label:"Dog",value:"dog",description:"The most popular pet in the world"},{label:"Elephant",value:"elephant",description:"The largest land animal"},{label:"Lion",value:"lion",description:"The king of the jungle"},{label:"Tiger",value:"tiger",description:"The largest cat species"},{label:"Giraffe",value:"giraffe",description:"The tallest land animal"},{label:"Dolphin",value:"dolphin",description:"A widely distributed and diverse group of aquatic mammals"},{label:"Penguin",value:"penguin",description:"A group of aquatic flightless birds"},{label:"Zebra",value:"zebra",description:"A several species of African equids"},{label:"Shark",value:"shark",description:"A group of elasmobranch fish characterized by a cartilaginous skeleton"},{label:"Whale",value:"whale",description:"Diverse group of fully aquatic placental marine mammals"},{label:"Otter",value:"otter",description:"A carnivorous mammal in the subfamily Lutrinae"},{label:"Crocodile",value:"crocodile",description:"A large semiaquatic reptile"}],Rt=[{id:1,name:"Tony Reichert",role:"CEO",team:"Management",status:"active",age:"29",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/1.png",email:"tony.reichert@example.com"},{id:2,name:"Zoey Lang",role:"Tech Lead",team:"Development",status:"paused",age:"25",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/1.png",email:"zoey.lang@example.com"},{id:3,name:"Jane Fisher",role:"Sr. Dev",team:"Development",status:"active",age:"22",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/2.png",email:"jane.fisher@example.com"},{id:4,name:"William Howard",role:"C.M.",team:"Marketing",status:"vacation",age:"28",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/2.png",email:"william.howard@example.com"},{id:5,name:"Kristen Copper",role:"S. Manager",team:"Sales",status:"active",age:"24",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/3.png",email:"kristen.cooper@example.com"},{id:6,name:"Brian Kim",role:"P. Manager",team:"Management",age:"29",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/3.png",email:"brian.kim@example.com",status:"active"},{id:7,name:"Michael Hunt",role:"Designer",team:"Design",status:"paused",age:"27",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/4.png",email:"michael.hunt@example.com"},{id:8,name:"Samantha Brooks",role:"HR Manager",team:"HR",status:"active",age:"31",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/4.png",email:"samantha.brooks@example.com"},{id:9,name:"Frank Harrison",role:"F. Manager",team:"Finance",status:"vacation",age:"33",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/5.png",email:"frank.harrison@example.com"},{id:10,name:"Emma Adams",role:"Ops Manager",team:"Operations",status:"active",age:"35",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/5.png",email:"emma.adams@example.com"},{id:11,name:"Brandon Stevens",role:"Jr. Dev",team:"Development",status:"active",age:"22",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/7.png",email:"brandon.stevens@example.com"},{id:12,name:"Megan Richards",role:"P. Manager",team:"Product",status:"paused",age:"28",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/7.png",email:"megan.richards@example.com"},{id:13,name:"Oliver Scott",role:"S. Manager",team:"Security",status:"active",age:"37",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/8.png",email:"oliver.scott@example.com"},{id:14,name:"Grace Allen",role:"M. Specialist",team:"Marketing",status:"active",age:"30",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/8.png",email:"grace.allen@example.com"},{id:15,name:"Noah Carter",role:"IT Specialist",team:"I. Technology",status:"paused",age:"31",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/9.png",email:"noah.carter@example.com"},{id:16,name:"Ava Perez",role:"Manager",team:"Sales",status:"active",age:"29",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/9.png",email:"ava.perez@example.com"},{id:17,name:"Liam Johnson",role:"Data Analyst",team:"Analysis",status:"active",age:"28",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/11.png",email:"liam.johnson@example.com"},{id:18,name:"Sophia Taylor",role:"QA Analyst",team:"Testing",status:"active",age:"27",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/11.png",email:"sophia.taylor@example.com"},{id:19,name:"Lucas Harris",role:"Administrator",team:"Information Technology",status:"paused",age:"32",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/male/12.png",email:"lucas.harris@example.com"},{id:20,name:"Mia Robinson",role:"Coordinator",team:"Operations",status:"active",age:"26",avatar:"https://d2u8k2ocievbld.cloudfront.net/memojis/female/12.png",email:"mia.robinson@example.com"}],K=new WeakMap;function We(o){return typeof o=="string"?o.replace(/\s*/g,""):""+o}function Ue(o,l){let e=K.get(o);if(!e)throw new Error("Unknown list");return`${e.id}-option-${We(l)}`}function Ke(o,l,e){let t=ee(o,{labelable:!0}),s=o.selectionBehavior||"toggle",i=o.linkBehavior||(s==="replace"?"action":"override");s==="toggle"&&i==="action"&&(i="override");let{listProps:n}=Se({...o,ref:e,selectionManager:l.selectionManager,collection:l.collection,disabledKeys:l.disabledKeys,linkBehavior:i}),{focusWithinProps:a}=xe({onFocusWithin:o.onFocus,onBlurWithin:o.onBlur,onFocusWithinChange:o.onFocusChange}),r=X(o.id);K.set(l,{id:r,shouldUseVirtualFocus:o.shouldUseVirtualFocus,shouldSelectOnPressUp:o.shouldSelectOnPressUp,shouldFocusOnHover:o.shouldFocusOnHover,isVirtualized:o.isVirtualized,onAction:o.onAction,linkBehavior:i});let{labelProps:h,fieldProps:c}=ye({...o,id:r,labelElementType:"span"});return{labelProps:h,listBoxProps:E(t,a,l.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...E(c,n)})}}function qe(o,l,e){var t,s;let{key:i}=o,n=K.get(l);var a;let r=(a=o.isDisabled)!==null&&a!==void 0?a:l.selectionManager.isDisabled(i);var h;let c=(h=o.isSelected)!==null&&h!==void 0?h:l.selectionManager.isSelected(i);var y;let b=(y=o.shouldSelectOnPressUp)!==null&&y!==void 0?y:n==null?void 0:n.shouldSelectOnPressUp;var d;let S=(d=o.shouldFocusOnHover)!==null&&d!==void 0?d:n==null?void 0:n.shouldFocusOnHover;var g;let v=(g=o.shouldUseVirtualFocus)!==null&&g!==void 0?g:n==null?void 0:n.shouldUseVirtualFocus;var p;let $=(p=o.isVirtualized)!==null&&p!==void 0?p:n==null?void 0:n.isVirtualized,x=G(),k=G(),f={role:"option","aria-disabled":r||void 0,"aria-selected":l.selectionManager.selectionMode!=="none"?c:void 0};Ee()&&je()||(f["aria-label"]=o["aria-label"],f["aria-labelledby"]=x,f["aria-describedby"]=k);let u=l.collection.getItem(i);if($){let z=Number(u==null?void 0:u.index);f["aria-posinset"]=Number.isNaN(z)?void 0:z+1,f["aria-setsize"]=Me(l.collection)}let C=n!=null&&n.onAction?()=>{var z;return n==null||(z=n.onAction)===null||z===void 0?void 0:z.call(n,i)}:void 0,{itemProps:P,isPressed:I,isFocused:w,hasAction:M,allowsSelection:j}=Te({selectionManager:l.selectionManager,key:i,ref:e,shouldSelectOnPressUp:b,allowsDifferentPressOrigin:b&&S,isVirtualized:$,shouldUseVirtualFocus:v,isDisabled:r,onAction:C||!(u==null||(t=u.props)===null||t===void 0)&&t.onAction?ve(u==null||(s=u.props)===null||s===void 0?void 0:s.onAction,C):void 0,linkBehavior:n==null?void 0:n.linkBehavior}),{hoverProps:A}=oe({isDisabled:r||!S,onHoverStart(){Y()||(l.selectionManager.setFocused(!0),l.selectionManager.setFocusedKey(i))}}),L=ee(u==null?void 0:u.props);delete L.id;let R=Oe(u==null?void 0:u.props);return{optionProps:{...f,...E(L,P,A,R),id:Ue(l,i)},labelProps:{id:x},descriptionProps:{id:k},isFocused:w,isFocusVisible:w&&Y(),isSelected:c,isDisabled:r,isPressed:I,allowsSelection:j,hasAction:M}}function Ne(o){let{heading:l,"aria-label":e}=o,t=X();return{itemProps:{role:"presentation"},headingProps:l?{id:t,role:"presentation"}:{},groupProps:{role:"group","aria-label":e,"aria-labelledby":l?t:void 0}}}function Je(o){const l=te(),{ref:e,as:t,state:s,variant:i,color:n,onAction:a,children:r,onSelectionChange:h,disableAnimation:c=(l==null?void 0:l.disableAnimation)??!1,itemClasses:y,className:b,topContent:d,bottomContent:S,emptyContent:g="No items.",hideSelectedIcon:v=!1,hideEmptyContent:p=!1,shouldHighlightOnFocus:$=!1,classNames:x,...k}=o,f=t||"ul",u=typeof f=="string",C=Ie(e),P=we({...o,children:r,onSelectionChange:h}),I=s||P,{listBoxProps:w}=Ke({...o,onAction:a},I,C),M=O.useMemo(()=>$e({className:b}),[b]),j=B(x==null?void 0:x.base,b);return{Component:f,state:I,variant:i,color:n,slots:M,classNames:x,topContent:d,bottomContent:S,emptyContent:g,hideEmptyContent:p,shouldHighlightOnFocus:$,hideSelectedIcon:v,disableAnimation:c,className:b,itemClasses:y,getBaseProps:(z={})=>({ref:C,"data-slot":"base",className:M.base({class:j}),...se(k,{enabled:u}),...z}),getListProps:(z={})=>({"data-slot":"list",className:M.list({class:x==null?void 0:x.list}),...w,...z}),getEmptyContentProps:(z={})=>({"data-slot":"empty-content",children:g,className:M.emptyContent({class:x==null?void 0:x.emptyContent}),...z})}}function Ge(o){const l=te(),[e,t]=Ae(o,Z.variantKeys),{as:s,item:i,state:n,description:a,startContent:r,endContent:h,isVirtualized:c,selectedIcon:y,className:b,classNames:d,autoFocus:S,onPress:g,onClick:v,shouldHighlightOnFocus:p,hideSelectedIcon:$=!1,isReadOnly:x=!1,...k}=e,f=o.disableAnimation??(l==null?void 0:l.disableAnimation)??!1,u=O.useRef(null),C=s||(o.href?"a":"li"),P=typeof C=="string",{rendered:I,key:w}=i,M=n.disabledKeys.has(w)||o.isDisabled,j=n.selectionManager.selectionMode!=="none",A=Ce();v&&typeof v=="function"&&Le("onClick is deprecated, please use onPress instead. See: https://github.com/nextui-org/nextui/issues/4292","ListboxItem");const{pressProps:L,isPressed:R}=De({ref:u,isDisabled:M,onPress:g}),{isHovered:z,hoverProps:ae}=oe({isDisabled:M}),{isFocusVisible:N,focusProps:le}=ke({autoFocus:S}),{isFocused:H,isSelected:J,optionProps:re,labelProps:ce,descriptionProps:de}=qe({key:w,isDisabled:M,"aria-label":e["aria-label"],isVirtualized:c},n,u);let W=re;const F=O.useMemo(()=>Z({...t,isDisabled:M,disableAnimation:f,hasTitleTextChild:typeof I=="string",hasDescriptionTextChild:typeof a=="string"}),[Fe(t),M,f,I,a]),ue=B(d==null?void 0:d.base,b);x&&(W=_e(W));const he=p&&H||(A?z||R:z||H&&!N),me=(T={})=>({ref:u,...E({onClick:v},W,x?{}:E(le,L),ae,se(k,{enabled:P}),T),"data-selectable":D(j),"data-focus":D(H),"data-hover":D(he),"data-disabled":D(M),"data-selected":D(J),"data-pressed":D(R),"data-focus-visible":D(N),className:F.base({class:B(ue,T.className)})}),pe=(T={})=>({...E(ce,T),"data-label":D(!0),className:F.title({class:d==null?void 0:d.title})}),fe=(T={})=>({...E(de,T),className:F.description({class:d==null?void 0:d.description})}),ge=(T={})=>({...E(T),className:F.wrapper({class:d==null?void 0:d.wrapper})}),be=O.useCallback((T={})=>({"aria-hidden":D(!0),"data-disabled":D(M),className:F.selectedIcon({class:d==null?void 0:d.selectedIcon}),...T}),[M,F,d]);return{Component:C,domRef:u,slots:F,classNames:d,isSelectable:j,isSelected:J,isDisabled:M,rendered:I,description:a,startContent:r,endContent:h,selectedIcon:y,hideSelectedIcon:$,disableAnimation:f,getItemProps:me,getLabelProps:pe,getWrapperProps:ge,getDescriptionProps:fe,getSelectedIconProps:be}}function Ye(o){const{isSelected:l,disableAnimation:e,...t}=o;return m.jsx("svg",{"aria-hidden":"true","data-selected":l,role:"presentation",viewBox:"0 0 17 18",...t,children:m.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:l?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:e?{}:{transition:"stroke-dashoffset 200ms ease"}})})}const V=o=>{const{Component:l,rendered:e,description:t,isSelectable:s,isSelected:i,isDisabled:n,selectedIcon:a,startContent:r,endContent:h,hideSelectedIcon:c,disableAnimation:y,getItemProps:b,getLabelProps:d,getWrapperProps:S,getDescriptionProps:g,getSelectedIconProps:v}=Ge(o),p=O.useMemo(()=>{const $=m.jsx(Ye,{disableAnimation:y,isSelected:i});return typeof a=="function"?a({icon:$,isSelected:i,isDisabled:n}):a||$},[a,i,n,y]);return m.jsxs(l,{...b(),children:[r,t?m.jsxs("div",{...S(),children:[m.jsx("span",{...d(),children:e}),m.jsx("span",{...g(),children:t})]}):m.jsx("span",{...d(),children:e}),s&&!c&&m.jsx("span",{...v(),children:p}),h]})};V.displayName="NextUI.ListboxItem";const q=ie(({item:o,state:l,as:e,variant:t,color:s,disableAnimation:i,className:n,classNames:a,hideSelectedIcon:r,showDivider:h=!1,dividerProps:c={},itemClasses:y,title:b,...d},S)=>{const g=e||"li",v=O.useMemo(()=>Pe(),[]),p=B(a==null?void 0:a.base,n),$=B(a==null?void 0:a.divider,c==null?void 0:c.className),{itemProps:x,headingProps:k,groupProps:f}=Ne({heading:o.rendered,"aria-label":o["aria-label"]});return m.jsxs(g,{"data-slot":"base",...E(x,d),className:v.base({class:p}),children:[o.rendered&&m.jsx("span",{...k,className:v.heading({class:a==null?void 0:a.heading}),"data-slot":"heading",children:o.rendered}),m.jsxs("ul",{...f,className:v.group({class:a==null?void 0:a.group}),"data-has-title":!!o.rendered,"data-slot":"group",children:[[...o.childNodes].map(u=>{const{key:C,props:P}=u;let I=m.jsx(V,{classNames:y,color:s,disableAnimation:i,hideSelectedIcon:r,item:u,state:l,variant:t,...P},C);return u.wrapper&&(I=u.wrapper(I)),I}),h&&m.jsx(ze,{as:"li",className:v.divider({class:$}),...c})]})]},o.key)});q.displayName="NextUI.ListboxSection";function _(o,l,e){let t=e.initialDeps??[],s;return()=>{var i,n,a,r;let h;e.key&&((i=e.debug)!=null&&i.call(e))&&(h=Date.now());const c=o();if(!(c.length!==t.length||c.some((d,S)=>t[S]!==d)))return s;t=c;let b;if(e.key&&((n=e.debug)!=null&&n.call(e))&&(b=Date.now()),s=l(...c),e.key&&((a=e.debug)!=null&&a.call(e))){const d=Math.round((Date.now()-h)*100)/100,S=Math.round((Date.now()-b)*100)/100,g=S/16,v=(p,$)=>{for(p=String(p);p.length<$;)p=" "+p;return p};console.info(`%c⏱ ${v(S,5)} /${v(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(r=e==null?void 0:e.onChange)==null||r.call(e,s),s}}function U(o,l){if(o===void 0)throw new Error("Unexpected undefined");return o}const Ze=(o,l)=>Math.abs(o-l)<1,Qe=(o,l,e)=>{let t;return function(...s){o.clearTimeout(t),t=o.setTimeout(()=>l.apply(this,s),e)}},Xe=o=>o,et=o=>{const l=Math.max(o.startIndex-o.overscan,0),e=Math.min(o.endIndex+o.overscan,o.count-1),t=[];for(let s=l;s<=e;s++)t.push(s);return t},tt=(o,l)=>{const e=o.scrollElement;if(!e)return;const t=o.targetWindow;if(!t)return;const s=n=>{const{width:a,height:r}=n;l({width:Math.round(a),height:Math.round(r)})};if(s(e.getBoundingClientRect()),!t.ResizeObserver)return()=>{};const i=new t.ResizeObserver(n=>{const a=n[0];if(a!=null&&a.borderBoxSize){const r=a.borderBoxSize[0];if(r){s({width:r.inlineSize,height:r.blockSize});return}}s(e.getBoundingClientRect())});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},Q={passive:!0},st=typeof window>"u"?!0:"onscrollend"in window,ot=(o,l)=>{const e=o.scrollElement;if(!e)return;const t=o.targetWindow;if(!t)return;let s=0;const i=o.options.useScrollendEvent&&st?()=>{}:Qe(t,()=>{l(s,!1)},o.options.isScrollingResetDelay),n=h=>()=>{const{horizontal:c,isRtl:y}=o.options;s=c?e.scrollLeft*(y&&-1||1):e.scrollTop,i(),l(s,h)},a=n(!0),r=n(!1);return r(),e.addEventListener("scroll",a,Q),e.addEventListener("scrollend",r,Q),()=>{e.removeEventListener("scroll",a),e.removeEventListener("scrollend",r)}},it=(o,l,e)=>{if(l!=null&&l.borderBoxSize){const t=l.borderBoxSize[0];if(t)return Math.round(t[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(o.getBoundingClientRect()[e.options.horizontal?"width":"height"])},nt=(o,{adjustments:l=0,behavior:e},t)=>{var s,i;const n=o+l;(i=(s=t.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[t.options.horizontal?"left":"top"]:n,behavior:e})};class at{constructor(l){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{this._measureElement(i.target,i)})}));return{disconnect:()=>{var s;(s=t())==null||s.disconnect(),e=null},observe:s=>{var i;return(i=t())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=t())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{typeof s>"u"&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Xe,rangeExtractor:et,onChange:()=>{},measureElement:it,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var t,s;(s=(t=this.options).onChange)==null||s.call(t,this,e)},this.maybeNotify=_(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t){this.maybeNotify();return}this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const s=new Map,i=new Map;for(let n=t-1;n>=0;n--){const a=e[n];if(s.has(a.lane))continue;const r=i.get(a.lane);if(r==null||a.end>r.end?i.set(a.lane,a):a.end<r.end&&s.set(a.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((n,a)=>n.end===a.end?n.index-a.index:n.end-a.end)[0]:void 0},this.getMeasurementOptions=_(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,s,i,n)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:i,enabled:n}),{key:!1}),this.getMeasurements=_(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:i,enabled:n},a)=>{if(!n)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const r=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,r);for(let c=r;c<e;c++){const y=i(c),b=this.options.lanes===1?h[c-1]:this.getFurthestMeasurement(h,c),d=b?b.end+this.options.gap:t+s,S=a.get(y),g=typeof S=="number"?S:this.options.estimateSize(c),v=d+g,p=b?b.lane:c%this.options.lanes;h[c]={index:c,start:d,size:g,end:v,key:y,lane:p}}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=_(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,t,s)=>this.range=e.length>0&&t>0?lt({measurements:e,outerSize:t,scrollOffset:s}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=_(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(e,t,s,i)=>t===null?[]:e({startIndex:t.startIndex,endIndex:t.endIndex,overscan:s,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const s=this.indexFromElement(e),i=this.measurementsCache[s];if(!i)return;const n=i.key,a=this.elementsCache.get(n);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(n,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const s=this.measurementsCache[e];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,n=t-i;n!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,n,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=n,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((t,s)=>{t.isConnected||(this.observer.unobserve(t),this.elementsCache.delete(s))});return}this._measureElement(e,void 0)},this.getVirtualItems=_(()=>[this.getIndexes(),this.getMeasurements()],(e,t)=>{const s=[];for(let i=0,n=e.length;i<n;i++){const a=e[i],r=t[a];s.push(r)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(t.length!==0)return U(t[ne(0,t.length-1,s=>U(t[s]).start,e)])},this.getOffsetForAlignment=(e,t)=>{const s=this.getSize(),i=this.getScrollOffset();t==="auto"&&(e<=i?t="start":e>=i+s?t="end":t="start"),t==="start"?e=e:t==="end"?e=e-s:t==="center"&&(e=e-s/2);const n=this.options.horizontal?"scrollWidth":"scrollHeight",r=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[n]:this.scrollElement[n]:0)-s;return Math.max(Math.min(r,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const s=this.measurementsCache[e];if(!s)return;const i=this.getSize(),n=this.getScrollOffset();if(t==="auto")if(s.end>=n+i-this.options.scrollPaddingEnd)t="end";else if(s.start<=n+this.options.scrollPaddingStart)t="start";else return[n,t];const a=t==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,t),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(e,t);if(!i)return;const[n,a]=i;this._scrollToOffset(n,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[h]=U(this.getOffsetForIndex(e,a));Ze(h,this.getScrollOffset())||this.scrollToIndex(e,{align:a,behavior:s})}else this.scrollToIndex(e,{align:a,behavior:s})}))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let s;return t.length===0?s=this.options.paddingStart:s=this.options.lanes===1?((e=t[t.length-1])==null?void 0:e.end)??0:Math.max(...t.slice(-this.options.lanes).map(i=>i.end)),Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(l)}}const ne=(o,l,e,t)=>{for(;o<=l;){const s=(o+l)/2|0,i=e(s);if(i<t)o=s+1;else if(i>t)l=s-1;else return s}return o>0?o-1:0};function lt({measurements:o,outerSize:l,scrollOffset:e}){const t=o.length-1,i=ne(0,t,a=>o[a].start,e);let n=i;for(;n<t&&o[n].end<e+l;)n++;return{startIndex:i,endIndex:n}}const rt=typeof document<"u"?O.useLayoutEffect:O.useEffect;function ct(o){const l=O.useReducer(()=>({}),{})[1],e={...o,onChange:(s,i)=>{var n;i?Be.flushSync(l):l(),(n=o.onChange)==null||n.call(o,s,i)}},[t]=O.useState(()=>new at(e));return t.setOptions(e),O.useEffect(()=>t._didMount(),[]),rt(()=>t._willUpdate()),t}function dt(o){return ct({observeElementRect:tt,observeElementOffset:ot,scrollToFn:nt,...o})}const ut=o=>{const{Component:l,state:e,color:t,variant:s,itemClasses:i,getBaseProps:n,topContent:a,bottomContent:r,hideEmptyContent:h,hideSelectedIcon:c,shouldHighlightOnFocus:y,disableAnimation:b,getEmptyContentProps:d,getListProps:S}=o,{virtualization:g}=o;if(!g||!Re(g)&&!g.maxListboxHeight&&!g.itemHeight)throw new Error("You are using a virtualized listbox. VirtualizedListbox requires 'virtualization' props with 'maxListboxHeight' and 'itemHeight' properties. This error might have originated from autocomplete components that use VirtualizedListbox. Please provide these props to use the virtualized listbox.");const{maxListboxHeight:v,itemHeight:p}=g,$=Math.min(v,p*e.collection.size),x=O.useRef(null),k=dt({count:e.collection.size,getScrollElement:()=>x.current,estimateSize:()=>p}),f=k.getVirtualItems(),u=({index:P,style:I})=>{var A;const w=[...e.collection][P],M={color:t,item:w,state:e,variant:s,disableAnimation:b,hideSelectedIcon:c,...w.props};if(w.type==="section")return m.jsx(q,{...M,itemClasses:i,style:{...I,...M.style}},w.key);let j=m.jsx(V,{...M,classNames:E(i,(A=w.props)==null?void 0:A.classNames),shouldHighlightOnFocus:y,style:{...I,...M.style}},w.key);return w.wrapper&&(j=w.wrapper(j)),j},C=m.jsxs(l,{...S(),children:[!e.collection.size&&!h&&m.jsx("li",{children:m.jsx("div",{...d()})}),m.jsx("div",{ref:x,style:{height:v,overflow:"auto"},children:$>0&&p>0&&m.jsx("div",{style:{height:`${k.getTotalSize()}px`,width:"100%",position:"relative"},children:f.map(P=>u({index:P.index,style:{position:"absolute",top:0,left:0,width:"100%",height:`${P.size}px`,transform:`translateY(${P.start}px)`}}))})})]});return m.jsxs("div",{...n(),children:[a,C,r]})},Bt=ie(function(l,e){const{isVirtualized:t,...s}=l,i=Je({...s,ref:e}),{Component:n,state:a,color:r,variant:h,itemClasses:c,getBaseProps:y,topContent:b,bottomContent:d,hideEmptyContent:S,hideSelectedIcon:g,shouldHighlightOnFocus:v,disableAnimation:p,getEmptyContentProps:$,getListProps:x}=i;if(t)return m.jsx(ut,{...l,...i});const k=m.jsxs(n,{...x(),children:[!a.collection.size&&!S&&m.jsx("li",{children:m.jsx("div",{...$()})}),[...a.collection].map(f=>{var P;const u={color:r,item:f,state:a,variant:h,disableAnimation:p,hideSelectedIcon:g,...f.props};if(f.type==="section")return m.jsx(q,{...u,itemClasses:c},f.key);let C=m.jsx(V,{...u,classNames:E(c,(P=f.props)==null?void 0:P.classNames),shouldHighlightOnFocus:v},f.key);return f.wrapper&&(C=f.wrapper(C)),C})]});return m.jsxs("div",{...y(),children:[b,k,d]})}),Vt=Ve,Ht=He;export{K as $,Bt as L,Vt as a,Ht as b,Lt as c,Ue as d,Rt as u};
