import{$ as k,i as de,j as W,g as N}from"./useFocusWithin-Dv5DP61h.js";import{d as ne,a as pe}from"./platform-BknMeRIZ.js";import{r as P,e as ge}from"./index-Dy2Ak0OH.js";import{c as ve,a as D,$ as ae,e as Te}from"./mergeProps-VNdaC4-V.js";import{a as U,e as q}from"./openLink-BoTcy9x3.js";function ye(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $e(t,n,o){ye(t,n),n.set(t,o)}let _=new Map,z=new Set;function J(){if(typeof window>"u")return;function t(s){return"propertyName"in s}let n=s=>{if(!t(s)||!s.target)return;let l=_.get(s.target);l||(l=new Set,_.set(s.target,l),s.target.addEventListener("transitioncancel",o,{once:!0})),l.add(s.propertyName)},o=s=>{if(!t(s)||!s.target)return;let l=_.get(s.target);if(l&&(l.delete(s.propertyName),l.size===0&&(s.target.removeEventListener("transitioncancel",o),_.delete(s.target)),_.size===0)){for(let p of z)p();z.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",o)}typeof document<"u"&&(document.readyState!=="loading"?J():document.addEventListener("DOMContentLoaded",J));function Pe(t){requestAnimationFrame(()=>{_.size===0?t():z.add(t)})}function be(){let t=P.useRef(new Map),n=P.useCallback((l,p,c,g)=>{let v=g!=null&&g.once?(...b)=>{t.current.delete(c),c(...b)}:c;t.current.set(c,{type:p,eventTarget:l,fn:v,options:g}),l.addEventListener(p,c,g)},[]),o=P.useCallback((l,p,c,g)=>{var v;let b=((v=t.current.get(c))===null||v===void 0?void 0:v.fn)||c;l.removeEventListener(p,b,g),t.current.delete(c)},[]),s=P.useCallback(()=>{t.current.forEach((l,p)=>{o(l.eventTarget,l.type,p,l.options)})},[o]);return P.useEffect(()=>s,[s]),{addGlobalListener:n,removeGlobalListener:o,removeAllGlobalListeners:s}}function he(t,n){ve(()=>{if(t&&t.ref&&n)return t.ref.current=n.current,()=>{t.ref&&(t.ref.current=null)}})}let C="default",B="",F=new WeakMap;function Q(t){if(ne()){if(C==="default"){const n=k(t);B=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}C="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(F.set(t,t.style.userSelect),t.style.userSelect="none")}function X(t){if(ne()){if(C!=="disabled")return;C="restoring",setTimeout(()=>{Pe(()=>{if(C==="restoring"){const n=k(t);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=B||""),B="",C="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&F.has(t)){let n=F.get(t);t.style.userSelect==="none"&&(t.style.userSelect=n),t.getAttribute("style")===""&&t.removeAttribute("style"),F.delete(t)}}const ie=ge.createContext({register:()=>{}});ie.displayName="PressResponderContext";function me(t,n){return n.get?n.get.call(t):n.value}function se(t,n,o){if(!n.has(t))throw new TypeError("attempted to "+o+" private field on non-instance");return n.get(t)}function Ee(t,n){var o=se(t,n,"get");return me(t,o)}function Se(t,n,o){if(n.set)n.set.call(t,o);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=o}}function Z(t,n,o){var s=se(t,n,"set");return Se(t,s,o),o}function Ke(t){let n=P.useContext(ie);if(n){let{register:o,...s}=n;t=ae(s,t),o()}return he(n,t.ref),t}var Y=new WeakMap;class G{continuePropagation(){Z(this,Y,!1)}get shouldStopPropagation(){return Ee(this,Y)}constructor(n,o,s,l){$e(this,Y,{writable:!0,value:void 0}),Z(this,Y,!0);var p;let c=(p=l==null?void 0:l.target)!==null&&p!==void 0?p:s.currentTarget;const g=c==null?void 0:c.getBoundingClientRect();let v,b=0,y,I=null;s.clientX!=null&&s.clientY!=null&&(y=s.clientX,I=s.clientY),g&&(y!=null&&I!=null?(v=y-g.left,b=I-g.top):(v=g.width/2,b=g.height/2)),this.type=n,this.pointerType=o,this.target=s.currentTarget,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.x=v,this.y=b}}const ee=Symbol("linkClicked");function Ie(t){let{onPress:n,onPressChange:o,onPressStart:s,onPressEnd:l,onPressUp:p,isDisabled:c,isPressed:g,preventFocusOnPress:v,shouldCancelOnPointerExit:b,allowTextSelectionOnPress:y,ref:I,...fe}=Ke(t),[ue,j]=P.useState(!1),M=P.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:S,removeAllGlobalListeners:O}=be(),h=D((e,f)=>{let $=M.current;if(c||$.didFirePressStart)return!1;let i=!0;if($.isTriggeringEvent=!0,s){let d=new G("pressstart",f,e);s(d),i=d.shouldStopPropagation}return o&&o(!0),$.isTriggeringEvent=!1,$.didFirePressStart=!0,j(!0),i}),T=D((e,f,$=!0)=>{let i=M.current;if(!i.didFirePressStart)return!1;i.ignoreClickAfterPress=!0,i.didFirePressStart=!1,i.isTriggeringEvent=!0;let d=!0;if(l){let r=new G("pressend",f,e);l(r),d=r.shouldStopPropagation}if(o&&o(!1),j(!1),n&&$&&!c){let r=new G("press",f,e);n(r),d&&(d=r.shouldStopPropagation)}return i.isTriggeringEvent=!1,d}),x=D((e,f)=>{let $=M.current;if(c)return!1;if(p){$.isTriggeringEvent=!0;let i=new G("pressup",f,e);return p(i),$.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),w=D(e=>{let f=M.current;f.isPressed&&f.target&&(f.isOverTarget&&f.pointerType!=null&&T(E(f.target,e),f.pointerType,!1),f.isPressed=!1,f.isOverTarget=!1,f.activePointerId=null,f.pointerType=null,O(),y||X(f.target))}),A=D(e=>{b&&w(e)}),ce=P.useMemo(()=>{let e=M.current,f={onKeyDown(i){if(H(i.nativeEvent,i.currentTarget)&&i.currentTarget.contains(i.target)){var d;re(i.target,i.key)&&i.preventDefault();let r=!0;if(!e.isPressed&&!i.repeat){e.target=i.currentTarget,e.isPressed=!0,r=h(i,"keyboard");let u=i.currentTarget,a=m=>{H(m,u)&&!m.repeat&&u.contains(m.target)&&e.target&&x(E(e.target,m),"keyboard")};S(k(i.currentTarget),"keyup",Te(a,$),!0)}r&&i.stopPropagation(),i.metaKey&&pe()&&((d=e.metaKeyEvents)===null||d===void 0||d.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(i){if(!(i&&!i.currentTarget.contains(i.target))&&i&&i.button===0&&!e.isTriggeringEvent&&!q.isOpening){let d=!0;if(c&&i.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||W(i.nativeEvent))){!c&&!v&&U(i.currentTarget);let r=h(i,"virtual"),u=x(i,"virtual"),a=T(i,"virtual");d=r&&u&&a}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,d&&i.stopPropagation()}}},$=i=>{var d;if(e.isPressed&&e.target&&H(i,e.target)){var r;re(i.target,i.key)&&i.preventDefault();let a=i.target;T(E(e.target,i),"keyboard",e.target.contains(a)),O(),i.key!=="Enter"&&V(e.target)&&e.target.contains(a)&&!i[ee]&&(i[ee]=!0,q(e.target,i,!1)),e.isPressed=!1,(r=e.metaKeyEvents)===null||r===void 0||r.delete(i.key)}else if(i.key==="Meta"&&(!((d=e.metaKeyEvents)===null||d===void 0)&&d.size)){var u;let a=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let m of a.values())(u=e.target)===null||u===void 0||u.dispatchEvent(new KeyboardEvent("keyup",m))}};if(typeof PointerEvent<"u"){f.onPointerDown=a=>{if(a.button!==0||!a.currentTarget.contains(a.target))return;if(de(a.nativeEvent)){e.pointerType="virtual";return}R(a.currentTarget)&&a.preventDefault(),e.pointerType=a.pointerType;let m=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=a.pointerId,e.target=a.currentTarget,!c&&!v&&U(a.currentTarget),y||Q(e.target),m=h(a,e.pointerType),S(k(a.currentTarget),"pointermove",i,!1),S(k(a.currentTarget),"pointerup",d,!1),S(k(a.currentTarget),"pointercancel",u,!1)),m&&a.stopPropagation()},f.onMouseDown=a=>{a.currentTarget.contains(a.target)&&a.button===0&&(R(a.currentTarget)&&a.preventDefault(),a.stopPropagation())},f.onPointerUp=a=>{!a.currentTarget.contains(a.target)||e.pointerType==="virtual"||a.button===0&&L(a,a.currentTarget)&&x(a,e.pointerType||a.pointerType)};let i=a=>{a.pointerId===e.activePointerId&&(e.target&&L(a,e.target)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,h(E(e.target,a),e.pointerType)):e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,T(E(e.target,a),e.pointerType,!1),A(a)))},d=a=>{a.pointerId===e.activePointerId&&e.isPressed&&a.button===0&&e.target&&(L(a,e.target)&&e.pointerType!=null?T(E(e.target,a),e.pointerType):e.isOverTarget&&e.pointerType!=null&&T(E(e.target,a),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,O(),y||X(e.target),"ontouchend"in e.target&&a.pointerType!=="mouse"&&S(e.target,"touchend",r,{once:!0}))},r=a=>{oe(a.currentTarget)&&a.preventDefault()},u=a=>{w(a)};f.onDragStart=a=>{a.currentTarget.contains(a.target)&&w(a)}}else{f.onMouseDown=r=>{if(r.button!==0||!r.currentTarget.contains(r.target))return;if(R(r.currentTarget)&&r.preventDefault(),e.ignoreEmulatedMouseEvents){r.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=r.currentTarget,e.pointerType=W(r.nativeEvent)?"virtual":"mouse",!c&&!v&&U(r.currentTarget),h(r,e.pointerType)&&r.stopPropagation(),S(k(r.currentTarget),"mouseup",i,!1)},f.onMouseEnter=r=>{if(!r.currentTarget.contains(r.target))return;let u=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,u=h(r,e.pointerType)),u&&r.stopPropagation()},f.onMouseLeave=r=>{if(!r.currentTarget.contains(r.target))return;let u=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,u=T(r,e.pointerType,!1),A(r)),u&&r.stopPropagation()},f.onMouseUp=r=>{r.currentTarget.contains(r.target)&&!e.ignoreEmulatedMouseEvents&&r.button===0&&x(r,e.pointerType||"mouse")};let i=r=>{if(r.button===0){if(e.isPressed=!1,O(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&L(r,e.target)&&e.pointerType!=null?T(E(e.target,r),e.pointerType):e.target&&e.isOverTarget&&e.pointerType!=null&&T(E(e.target,r),e.pointerType,!1),e.isOverTarget=!1}};f.onTouchStart=r=>{if(!r.currentTarget.contains(r.target))return;let u=we(r.nativeEvent);if(!u)return;e.activePointerId=u.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=r.currentTarget,e.pointerType="touch",!c&&!v&&U(r.currentTarget),y||Q(e.target),h(K(e.target,r),e.pointerType)&&r.stopPropagation(),S(N(r.currentTarget),"scroll",d,!0)},f.onTouchMove=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let u=te(r.nativeEvent,e.activePointerId),a=!0;u&&L(u,r.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,a=h(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,a=T(K(e.target,r),e.pointerType,!1),A(K(e.target,r))),a&&r.stopPropagation()},f.onTouchEnd=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let u=te(r.nativeEvent,e.activePointerId),a=!0;u&&L(u,r.currentTarget)&&e.pointerType!=null?(x(K(e.target,r),e.pointerType),a=T(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(a=T(K(e.target,r),e.pointerType,!1)),a&&r.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!y&&X(e.target),O()},f.onTouchCancel=r=>{r.currentTarget.contains(r.target)&&(r.stopPropagation(),e.isPressed&&w(K(e.target,r)))};let d=r=>{e.isPressed&&r.target.contains(e.target)&&w({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};f.onDragStart=r=>{r.currentTarget.contains(r.target)&&w(r)}}return f},[S,c,v,O,y,w,A,T,h,x]);return P.useEffect(()=>()=>{var e;y||X((e=M.current.target)!==null&&e!==void 0?e:void 0)},[y]),{isPressed:g||ue,pressProps:ae(fe,ce)}}function V(t){return t.tagName==="A"&&t.hasAttribute("href")}function H(t,n){const{key:o,code:s}=t,l=n,p=l.getAttribute("role");return(o==="Enter"||o===" "||o==="Spacebar"||s==="Space")&&!(l instanceof N(l).HTMLInputElement&&!le(l,o)||l instanceof N(l).HTMLTextAreaElement||l.isContentEditable)&&!((p==="link"||!p&&V(l))&&o!=="Enter")}function we(t){const{targetTouches:n}=t;return n.length>0?n[0]:null}function te(t,n){const o=t.changedTouches;for(let s=0;s<o.length;s++){const l=o[s];if(l.identifier===n)return l}return null}function K(t,n){let o=0,s=0;return n.targetTouches&&n.targetTouches.length===1&&(o=n.targetTouches[0].clientX,s=n.targetTouches[0].clientY),{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:o,clientY:s}}function E(t,n){let o=n.clientX,s=n.clientY;return{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:o,clientY:s}}function ke(t){let n=0,o=0;return t.width!==void 0?n=t.width/2:t.radiusX!==void 0&&(n=t.radiusX),t.height!==void 0?o=t.height/2:t.radiusY!==void 0&&(o=t.radiusY),{top:t.clientY-o,right:t.clientX+n,bottom:t.clientY+o,left:t.clientX-n}}function Me(t,n){return!(t.left>n.right||n.left>t.right||t.top>n.bottom||n.top>t.bottom)}function L(t,n){let o=n.getBoundingClientRect(),s=ke(t);return Me(o,s)}function R(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function oe(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!V(t)}function re(t,n){return t instanceof HTMLInputElement?!le(t,n):oe(t)}const Oe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function le(t,n){return t.type==="checkbox"||t.type==="radio"?n===" ":Oe.has(t.type)}export{he as $,$e as _,Pe as a,Ie as b,be as c,X as d,Q as e,ie as f};
