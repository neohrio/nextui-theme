import{j as g}from"./jsx-runtime-CS_Wz6c_.js";import{$ as Z,a as N,b as ee}from"./checkbox-Dsg87IPg.js";import{r as b}from"./index-Dy2Ak0OH.js";import{$ as L,e as ie}from"./mergeProps-VNdaC4-V.js";import{$ as ae}from"./filterDOMProps-CeZl_uWj.js";import{$ as re}from"./useField-B3aMER4u.js";import{c as oe}from"./useFocusWithin-Dv5DP61h.js";import{$ as se,b as te,u as le,a as ne}from"./base-form-BElK45Vm.js";import{$ as de}from"./useControlledState-B6nO32B9.js";import{u as ce}from"./provider-context-DmA892L5.js";import{u as ue}from"./dom-DrLNPp_C.js";import{f as fe}from"./filter-dom-props-BPLFryJX.js";import{s as be}from"./text-CWQU1A9l.js";import{c as R}from"./clsx-IIdnr2mY.js";import{f as ve}from"./utils-Dl_53iLP.js";function pe(i,a){let{isDisabled:n,name:v,validationBehavior:c="aria"}=i,{isInvalid:e,validationErrors:u,validationDetails:s}=a.displayValidation,{labelProps:p,fieldProps:r,descriptionProps:o,errorMessageProps:t}=re({...i,labelElementType:"span",isInvalid:e,errorMessage:i.errorMessage||u});Z.set(a,{name:v,descriptionId:o.id,errorMessageId:t.id,validationBehavior:c});let m=ae(i,{labelable:!0}),{focusWithinProps:h}=oe({onBlurWithin:i.onBlur,onFocusWithin:i.onFocus,onFocusWithinChange:i.onFocusChange});return{groupProps:L(m,{role:"group","aria-disabled":n||void 0,...r,...h}),labelProps:p,descriptionProps:o,errorMessageProps:t,isInvalid:e,validationErrors:u,validationDetails:s}}function me(i={}){let[a,n]=de(i.value,i.defaultValue||[],i.onChange),v=!!i.isRequired&&a.length===0,c=b.useRef(new Map),e=se({...i,value:a}),u=e.displayValidation.isInvalid;var s;return{...e,value:a,setValue(r){i.isReadOnly||i.isDisabled||n(r)},isDisabled:i.isDisabled||!1,isReadOnly:i.isReadOnly||!1,isSelected(r){return a.includes(r)},addValue(r){i.isReadOnly||i.isDisabled||a.includes(r)||n(a.concat(r))},removeValue(r){i.isReadOnly||i.isDisabled||a.includes(r)&&n(a.filter(o=>o!==r))},toggleValue(r){i.isReadOnly||i.isDisabled||(a.includes(r)?n(a.filter(o=>o!==r)):n(a.concat(r)))},setInvalid(r,o){let t=new Map(c.current);o.isInvalid?t.set(r,o):t.delete(r),c.current=t,e.updateValidation(te(...t.values()))},validationState:(s=i.validationState)!==null&&s!==void 0?s:u?"invalid":null,isInvalid:u,isRequired:v}}function $e(i){const a=ce(),{validationBehavior:n}=le(ne)||{},{as:v,ref:c,classNames:e,children:u,label:s,radius:p,value:r,name:o,defaultValue:t,isInvalid:m,validationState:h,size:y="md",color:V="primary",orientation:P="vertical",lineThrough:k=!1,isDisabled:O=!1,validationBehavior:x=n??(a==null?void 0:a.validationBehavior)??"native",disableAnimation:I=(a==null?void 0:a.disableAnimation)??!1,isReadOnly:j,isRequired:M,onValueChange:B,description:T,errorMessage:C,className:_,...$}=i,S=v||"div",z=typeof S=="string",G=ue(c),E=b.useMemo(()=>({...$,value:r,name:o,"aria-label":be($["aria-label"],s),defaultValue:t,isRequired:M,isReadOnly:j,orientation:P,validationBehavior:x,isInvalid:h==="invalid"||m,onChange:ie(i.onChange,B)}),[r,o,s,t,M,j,P,B,m,h,x,$["aria-label"],$]),l=me(E),{labelProps:W,groupProps:w,descriptionProps:F,errorMessageProps:q,validationErrors:D,validationDetails:U}=pe(E,l),H=b.useMemo(()=>({size:y,color:V,radius:p,lineThrough:k,isInvalid:l.isInvalid,isDisabled:O,disableAnimation:I,validationBehavior:x,groupState:l}),[y,V,p,k,O,I,x,l.value,l.isDisabled,l.isReadOnly,l.isInvalid,l.isSelected]),d=b.useMemo(()=>N({isRequired:M,isInvalid:l.isInvalid,disableAnimation:I}),[M,l.isInvalid,,I]),A=R(e==null?void 0:e.base,_),J=b.useCallback(()=>({ref:G,className:d.base({class:A}),...L(w,fe($,{enabled:z}))}),[d,G,A,w,$]),K=b.useCallback(()=>({className:d.label({class:e==null?void 0:e.label}),...W}),[d,W,e==null?void 0:e.label]),Q=b.useCallback(()=>({className:d.wrapper({class:e==null?void 0:e.wrapper}),role:"presentation","data-orientation":P}),[d,P,e==null?void 0:e.wrapper]),X=b.useCallback((f={})=>({...f,...F,className:d.description({class:R(e==null?void 0:e.description,f==null?void 0:f.className)})}),[d,F,e==null?void 0:e.description]),Y=b.useCallback((f={})=>({...f,...q,className:d.errorMessage({class:R(e==null?void 0:e.errorMessage,f==null?void 0:f.className)})}),[d,q,e==null?void 0:e.errorMessage]);return{Component:S,children:u,label:s,context:H,description:T,isInvalid:l.isInvalid,errorMessage:typeof C=="function"?C({isInvalid:l.isInvalid,validationErrors:D,validationDetails:U}):C||(D==null?void 0:D.join(" ")),getGroupProps:J,getLabelProps:K,getWrapperProps:Q,getDescriptionProps:X,getErrorMessageProps:Y}}const ge=ve((i,a)=>{const{children:n,context:v,label:c,description:e,isInvalid:u,errorMessage:s,getGroupProps:p,getLabelProps:r,getWrapperProps:o,getDescriptionProps:t,getErrorMessageProps:m}=$e({...i,ref:a});return g.jsxs("div",{...p(),children:[c&&g.jsx("span",{...r(),children:c}),g.jsx("div",{...o(),children:g.jsx(ee,{value:v,children:n})}),u&&s?g.jsx("div",{...m(),children:s}):e?g.jsx("div",{...t(),children:e}):null]})});ge.displayName="NextUI.CheckboxGroup";export{ge as C};
